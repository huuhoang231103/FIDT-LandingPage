RewriteEngine On

# API v1 endpoints (nếu sau này bạn muốn dùng dạng /api/v1/...)
RewriteRule ^api/v1/services/get_services\.php$ /backend/api/v1/services/get_services.php [L]
RewriteRule ^api/v1/services/update_service\.php$ /backend/api/v1/services/update_service.php [L]

RewriteRule ^api/v1/faq/get_faqs\.php$ /backend/api/v1/faq/get_faqs.php [L]
RewriteRule ^api/v1/faq/update_faq\.php$ /backend/api/v1/faq/update_faq.php [L]

RewriteRule ^api/v1/trainings/get_trainings\.php$ /backend/api/v1/trainings/get_trainings.php [L]
RewriteRule ^api/v1/trainings/update_training\.php$ /backend/api/v1/trainings/update_training.php [L]

RewriteRule ^api/v1/auth/login\.php$ /backend/api/v1/auth/login.php [L]
RewriteRule ^api/v1/auth/check_login\.php$ /backend/api/v1/auth/check_login.php [L]

RewriteRule ^api/v1/contact/send_mail\.php$ /backend/api/v1/contact/send_mail.php [L]
RewriteRule ^api/v1/contact/get_emails_json\.php$ /backend/api/v1/contact/get_emails_json.php [L]
RewriteRule ^api/v1/contact/export_emails_json\.php$ /backend/api/v1/contact/export_emails_json.php [L]

# ⚠️ Bỏ hết legacy redirect vì nó gây lỗi Unexpected token '<'
# (không cần nữa vì frontend đang gọi trực tiếp /backend/FAQ/... , /backend/trainings/..., v.v.)

# CORS headers cho tất cả request API
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "https://thinhvuongtaichinh.net"
    Header always set Access-Control-Allow-Credentials "true"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, X-Admin-Token"
</IfModule>
